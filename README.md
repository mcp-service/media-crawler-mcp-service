# media-crawler-mcp-service - ç¤¾äº¤åª’ä½“çˆ¬è™« MCP æœåŠ¡

åŸºäº [MediaCrawler](https://github.com/NanmiCoder/MediaCrawler) çš„ MCP (Model Context Protocol) è¾¹è½¦æœåŠ¡ï¼Œå°†ç¤¾äº¤åª’ä½“çˆ¬è™«èƒ½åŠ›å°è£…ä¸ºæ ‡å‡†åŒ–çš„ AI å·¥å…·è°ƒç”¨æ¥å£ã€‚

## ğŸ¯ é¡¹ç›®å®šä½

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ª **MCP è¾¹è½¦æœåŠ¡**ï¼Œå°† MediaCrawler çš„ç¤¾äº¤åª’ä½“çˆ¬è™«åŠŸèƒ½æš´éœ²ä¸º MCP åè®®å·¥å…·ï¼Œä½¿ AI åŠ©æ‰‹ï¼ˆClaudeã€ChatGPT ç­‰ï¼‰èƒ½å¤Ÿç›´æ¥è°ƒç”¨çˆ¬è™«èƒ½åŠ›ï¼Œå®ç°æ™ºèƒ½åŒ–çš„ç¤¾äº¤åª’ä½“æ•°æ®é‡‡é›†ã€‚

### æ ¸å¿ƒç‰¹æ€§

- **ğŸ”Œ MCP åè®®å°è£…**: å°† MediaCrawler å°è£…ä¸ºæ ‡å‡† MCP å·¥å…·ï¼Œæ”¯æŒ SSE å’Œ STDIO åŒä¼ è¾“æ¨¡å¼
- **ğŸ¤– AI å‹å¥½**: æä¾›ç»“æ„åŒ–çš„ Prompts å’Œ Resourcesï¼Œä¼˜åŒ– AI è°ƒç”¨ä½“éªŒ
- **ğŸ›ï¸ ç®¡ç†ç«¯æ¨¡å—**: ç‹¬ç«‹çš„ Web ç®¡ç†ç•Œé¢ï¼Œå¤„ç†ç™»å½•éªŒè¯ç ç­‰äººå·¥äº¤äº’åœºæ™¯
- **ğŸ³ å®¹å™¨åŒ–éƒ¨ç½²**: å®Œæ•´çš„ Docker Compose æ–¹æ¡ˆï¼Œä¸€é”®å¯åŠ¨æ‰€æœ‰æœåŠ¡
- **ğŸ“Š å¤šå¹³å°æ”¯æŒ**: å°çº¢ä¹¦ã€æŠ–éŸ³ã€å¿«æ‰‹ã€Bç«™ã€å¾®åšã€è´´å§ã€çŸ¥ä¹

## ğŸ™ è‡´è°¢

æœ¬é¡¹ç›®åŸºäºä»¥ä¸‹ä¼˜ç§€çš„å¼€æºé¡¹ç›®æ„å»ºï¼š

- **[MediaCrawler](https://github.com/NanmiCoder/MediaCrawler)** - æ„Ÿè°¢ [@NanmiCoder](https://github.com/NanmiCoder) æä¾›çš„å¼ºå¤§ç¤¾äº¤åª’ä½“çˆ¬è™«å¼•æ“
- **[FastMCP](https://github.com/jlowin/fastmcp)** - MCP åè®®çš„ Python å®ç°æ¡†æ¶

## ğŸ—ï¸ æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      AI åŠ©æ‰‹ (Claude/GPT)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ MCP Protocol (SSE/STDIO)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   MCP Tools Service                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  FastMCP Server                                     â”‚   â”‚
â”‚  â”‚  - Tools: 21 ä¸ªçˆ¬è™«å·¥å…· (xhs_search, dy_detail...) â”‚   â”‚
â”‚  â”‚  - Prompts: ä½¿ç”¨æŒ‡å—ã€æ•…éšœæ’æŸ¥ã€æœ€ä½³å®è·µ           â”‚   â”‚
â”‚  â”‚  - Resources: æ•°æ®ç›®å½•ã€é…ç½®ä¿¡æ¯ã€ç³»ç»ŸçŠ¶æ€         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Admin Service (FastAPI)                            â”‚   â”‚
â”‚  â”‚  - ç™»å½•éªŒè¯ç å¤„ç†                                   â”‚   â”‚
â”‚  â”‚  - çˆ¬è™«ä»»åŠ¡ç®¡ç†                                     â”‚   â”‚
â”‚  â”‚  - æ•°æ®æŸ¥çœ‹å¯¼å‡º                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ è¾¹è½¦è°ƒç”¨
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              MediaCrawler (Git Submodule)                   â”‚
â”‚  - å°çº¢ä¹¦çˆ¬è™« (xhs)    - æŠ–éŸ³çˆ¬è™« (dy)                     â”‚
â”‚  - å¿«æ‰‹çˆ¬è™« (ks)       - Bç«™çˆ¬è™« (bili)                    â”‚
â”‚  - å¾®åšçˆ¬è™« (wb)       - è´´å§çˆ¬è™« (tieba)                  â”‚
â”‚  - çŸ¥ä¹çˆ¬è™« (zhihu)                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### âš¡ æœ€å¿« 3 åˆ†é’Ÿä¸Šæ‰‹ï¼ˆæ¨èï¼‰

**ä½¿ç”¨ Docker Compose ä¸€é”®å¯åŠ¨ï¼ˆæ— éœ€å®‰è£… Python å’Œä¾èµ–ï¼‰ï¼š**

```bash
# 1. å…‹éš†é¡¹ç›®ï¼ˆå« MediaCrawler å­æ¨¡å—ï¼‰
git clone --recurse-submodules <repository-url>
cd ai-tools-core

# 2. é…ç½®ç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ï¼Œä½¿ç”¨é»˜è®¤é…ç½®å¯è·³è¿‡ï¼‰
cp .env.example .env

# 3. å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼ˆæ•°æ®åº“ + Redis + MCP æœåŠ¡ï¼‰
cd deploy && docker compose up -d
```

å¯åŠ¨æˆåŠŸåè®¿é—®ï¼š
- **MCP SSE æœåŠ¡**: http://localhost:9090/sse
- **ç®¡ç†æœåŠ¡**: http://localhost:9091
- **å¥åº·æ£€æŸ¥**: http://localhost:9090/health

> **æ¨èä½¿ç”¨ Docker Compose**: å¼€ç®±å³ç”¨ï¼Œè‡ªåŠ¨é…ç½®æ•°æ®åº“å’Œ Redisï¼Œæ— éœ€æ‰‹åŠ¨å®‰è£…ä¾èµ–ã€‚

### ç¯å¢ƒè¦æ±‚

#### Docker æ–¹å¼ï¼ˆæ¨èï¼‰
- **Docker 20.10+**
- **Docker Compose 2.0+**

#### æœ¬åœ°å¼€å‘æ–¹å¼
- **Python 3.11+**
- **Poetry 2.0+**
- PostgreSQL 12+ (å¯é€‰)
- Redis 6+ (å¯é€‰)

### è¯¦ç»†å®‰è£…æ­¥éª¤

#### æ–¹å¼ä¸€ï¼šDocker Composeï¼ˆç”Ÿäº§æ¨èï¼‰â­

**1. å…‹éš†é¡¹ç›®**

```bash
# å®Œæ•´å…‹éš†ï¼ˆåŒ…å« MediaCrawler å­æ¨¡å—ï¼‰
git clone --recurse-submodules <repository-url>
cd ai-tools-core

# å¦‚æœå·²å…‹éš†ä½†ç¼ºå°‘å­æ¨¡å—ï¼Œæ‰§è¡Œï¼š
git submodule update --init --recursive
```

**2. é…ç½®ç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ï¼‰**

```bash
cp .env.example .env
```

é»˜è®¤é…ç½®å·²å¯ç›´æ¥ä½¿ç”¨ï¼Œå¦‚éœ€è‡ªå®šä¹‰ï¼š

```bash
# ç¼–è¾‘ .env æ–‡ä»¶
nano .env  # æˆ–ä½¿ç”¨å…¶ä»–ç¼–è¾‘å™¨
```

**3. å¯åŠ¨æœåŠ¡**

```bash
# æ–¹å¼ A: ä½¿ç”¨å¯åŠ¨è„šæœ¬
cd deploy && ./start.sh prod

# æ–¹å¼ B: ç›´æ¥ä½¿ç”¨ Docker Compose
cd deploy && docker compose up -d
```

**4. éªŒè¯æœåŠ¡**

```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
cd deploy && docker compose ps

# æŸ¥çœ‹æ—¥å¿—
cd deploy && docker compose logs -f mcp-service

# æµ‹è¯•å¥åº·æ£€æŸ¥
curl http://localhost:9090/health
```

**Docker Compose å¸¸ç”¨å‘½ä»¤ï¼š**

```bash
# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡çŠ¶æ€
cd deploy && docker compose ps

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
cd deploy && docker compose logs -f

# é‡å¯ MCP æœåŠ¡
cd deploy && docker compose restart mcp-service

# åœæ­¢æ‰€æœ‰æœåŠ¡
cd deploy && docker compose down

# åœæ­¢å¹¶åˆ é™¤æ•°æ®å·
cd deploy && docker compose down -v

# é‡æ–°æ„å»ºå¹¶å¯åŠ¨
cd deploy && docker compose up -d --build

# è¿›å…¥å®¹å™¨
cd deploy && docker compose exec mcp-service bash
```

#### æ–¹å¼äºŒï¼šæœ¬åœ°å¼€å‘

**1. å…‹éš†é¡¹ç›®**

```bash
git clone --recurse-submodules <repository-url>
cd ai-tools-core
```

> **é‡è¦**: å¿…é¡»ä½¿ç”¨ `--recurse-submodules` å‚æ•°å…‹éš†ï¼Œå¦åˆ™ MediaCrawler å­æ¨¡å—ä¸ä¼šè¢«ä¸‹è½½ã€‚

**2. å®‰è£… Poetry**

```bash
# macOS/Linux
curl -sSL https://install.python-poetry.org | python3 -

# Windows (PowerShell)
(Invoke-WebRequest -Uri https://install.python-poetry.org -UseBasicParsing).Content | py -

# éªŒè¯å®‰è£…
poetry --version
```

**3. å®‰è£…é¡¹ç›®ä¾èµ–**

```bash
# å®‰è£…æ‰€æœ‰ä¾èµ–
poetry install

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼ˆå¯é€‰ï¼‰
poetry shell
```

**4. é…ç½®ç¯å¢ƒå˜é‡**

```bash
cp .env.example .env
nano .env  # ç¼–è¾‘é…ç½®
```

**å¿…éœ€é…ç½®é¡¹ï¼š**

```bash
# åº”ç”¨åŸºç¡€é…ç½®
APP_ENV=dev              # ç¯å¢ƒï¼šdev æˆ– prod
APP_PORT=9090            # MCP æœåŠ¡ç«¯å£
ADMIN_PORT=9091          # ç®¡ç†æœåŠ¡ç«¯å£

# å¹³å°é€‰æ‹©ï¼ˆå¯é€‰ï¼Œé»˜è®¤å¯ç”¨æ‰€æœ‰ï¼‰
ENABLED_PLATFORMS=all    # æˆ–æŒ‡å®šï¼šxhs,dy,bili
```

**å¯é€‰é…ç½®é¡¹ï¼š**

```bash
# MediaCrawler é…ç½®
MEDIA_CRAWLER_HEADLESS=true              # æ— å¤´æ¨¡å¼ï¼ˆç”Ÿäº§ç¯å¢ƒæ¨èï¼‰
MEDIA_CRAWLER_LOGIN_TYPE=qrcode          # ç™»å½•æ–¹å¼ï¼šqrcode, phone, cookie
MEDIA_CRAWLER_SAVE_DATA_OPTION=json      # æ•°æ®å­˜å‚¨ï¼šjson, csv, db, sqlite

# æ•°æ®åº“é…ç½®ï¼ˆå¯é€‰ï¼ŒDocker ä¼šè‡ªåŠ¨é…ç½®ï¼‰
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=your-password
DB_NAME=mcp_tools_db

# Redis é…ç½®ï¼ˆå¯é€‰ï¼ŒDocker ä¼šè‡ªåŠ¨é…ç½®ï¼‰
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
```

**5. å¯åŠ¨æœåŠ¡**

```bash
# æ–¹å¼ A: ä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰
cd deploy && ./start.sh dev

# æ–¹å¼ B: ç›´æ¥å‘½ä»¤
poetry run python main.py --transport both

# æ–¹å¼ C: ä»… SSE æ¨¡å¼
poetry run python main.py --transport sse

# æ–¹å¼ D: ä¸å¯åŠ¨ç®¡ç†æœåŠ¡
poetry run python main.py --transport sse --admin-port 0
```

### æœåŠ¡åœ°å€

å¯åŠ¨æˆåŠŸåå¯ä»¥è®¿é—®ï¼š

| æœåŠ¡ | åœ°å€ | è¯´æ˜ |
|------|------|------|
| **MCP SSE æœåŠ¡** | http://localhost:9090/sse | AI å·¥å…·è°ƒç”¨å…¥å£ |
| **ç®¡ç†æœåŠ¡** | http://localhost:9091 | ç™»å½•ç®¡ç†ã€ä»»åŠ¡ç›‘æ§ |
| **å¥åº·æ£€æŸ¥** | http://localhost:9090/health | æœåŠ¡å¥åº·çŠ¶æ€ |
| **PostgreSQL** | localhost:5432 | æ•°æ®åº“ï¼ˆä»… Dockerï¼‰ |
| **Redis** | localhost:6379 | ç¼“å­˜ï¼ˆä»… Dockerï¼‰ |

### è¿æ¥åˆ° AI åŠ©æ‰‹

#### Claude Desktop é…ç½®

ç¼–è¾‘ Claude Desktop é…ç½®æ–‡ä»¶ï¼š

**macOS**: `~/Library/Application Support/Claude/claude_desktop_config.json`
**Windows**: `%APPDATA%\Claude\claude_desktop_config.json`

æ·»åŠ é…ç½®ï¼š

```json
{
  "mcpServers": {
    "media-crawler": {
      "url": "http://localhost:9090/sse"
    }
  }
}
```

é‡å¯ Claude Desktopï¼Œå³å¯çœ‹åˆ° 21 ä¸ªçˆ¬è™«å·¥å…·ï¼

#### å…¶ä»– MCP å®¢æˆ·ç«¯

ä»»ä½•æ”¯æŒ MCP åè®®çš„å®¢æˆ·ç«¯éƒ½å¯ä»¥è¿æ¥ï¼š

- **SSE æ¨¡å¼**: ä½¿ç”¨ `http://localhost:9090/sse`
- **STDIO æ¨¡å¼**: è¿è¡Œ `poetry run python main.py --transport stdio`

### ç¬¬ä¸€æ¬¡ä½¿ç”¨

#### 1. æµ‹è¯•å°çº¢ä¹¦çˆ¬è™«

åœ¨ AI åŠ©æ‰‹ä¸­è¾“å…¥ï¼š

```plaintext
ä½¿ç”¨ xhs_search å·¥å…·æœç´¢"AIç»˜ç”»"ç›¸å…³çš„å°çº¢ä¹¦ç¬”è®°ï¼Œ
è¿”å›å‰ 5 æ¡ç»“æœçš„æ ‡é¢˜å’Œç‚¹èµæ•°ã€‚
```

#### 2. å¤„ç†ç™»å½•ï¼ˆå¦‚éœ€è¦ï¼‰

é¦–æ¬¡çˆ¬å–æŸäº›å¹³å°æ—¶ï¼Œéœ€è¦ç™»å½•ï¼š

1. æ‰“å¼€ç®¡ç†ç•Œé¢ï¼šhttp://localhost:9091
2. é€‰æ‹©å¹³å°ï¼ˆå¦‚"å°çº¢ä¹¦"ï¼‰
3. ä½¿ç”¨äºŒç»´ç æ‰«ç ç™»å½•
4. ç™»å½•çŠ¶æ€ä¼šè‡ªåŠ¨ä¿å­˜åˆ° `browser_data/` ç›®å½•

#### 3. æŸ¥çœ‹çˆ¬å–æ•°æ®

æ•°æ®ä¿å­˜åœ¨ `data/` ç›®å½•ï¼š

```bash
# æŸ¥çœ‹å°çº¢ä¹¦æ•°æ®
ls -lh data/xhs/

# æŸ¥çœ‹æœ€æ–°çš„ JSON æ–‡ä»¶
cat data/xhs/notes_*.json | jq '.[0]'
```

### å¸¸è§é—®é¢˜

**Q: å­æ¨¡å—æ²¡æœ‰ä¸‹è½½æ€ä¹ˆåŠï¼Ÿ**

```bash
git submodule update --init --recursive
```

**Q: ç«¯å£è¢«å ç”¨æ€ä¹ˆåŠï¼Ÿ**

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œä¿®æ”¹ç«¯å£ï¼š

```bash
APP_PORT=9090    # æ”¹ä¸ºå…¶ä»–ç«¯å£ï¼Œå¦‚ 9095
ADMIN_PORT=9091  # æ”¹ä¸ºå…¶ä»–ç«¯å£ï¼Œå¦‚ 9096
```

**Q: å¯åŠ¨å¤±è´¥æ€ä¹ˆåŠï¼Ÿ**

æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ï¼š

```bash
tail -f logs/mcp-toolse.log
```

**Q: Docker éƒ¨ç½²å¤±è´¥ï¼Ÿ**

æ£€æŸ¥ Docker æ˜¯å¦è¿è¡Œï¼š

```bash
docker info
```

æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼š

```bash
cd deploy && docker compose logs mcp-service
```

## ğŸ”§ MCP å·¥å…·åˆ—è¡¨

### å°çº¢ä¹¦ (xhs)
- `xhs_search` - å…³é”®è¯æœç´¢çˆ¬å–
- `xhs_detail` - æŒ‡å®šç¬”è®°è¯¦æƒ…
- `xhs_creator` - åˆ›ä½œè€…ä¸»é¡µçˆ¬å–

### æŠ–éŸ³ (dy)
- `dy_search` - å…³é”®è¯æœç´¢çˆ¬å–
- `dy_detail` - æŒ‡å®šè§†é¢‘è¯¦æƒ…
- `dy_creator` - åˆ›ä½œè€…ä¸»é¡µçˆ¬å–

### å¿«æ‰‹ (ks)
- `ks_search` - å…³é”®è¯æœç´¢çˆ¬å–
- `ks_detail` - æŒ‡å®šè§†é¢‘è¯¦æƒ…
- `ks_creator` - åˆ›ä½œè€…ä¸»é¡µçˆ¬å–

### Bç«™ (bili)
- `bili_search` - å…³é”®è¯æœç´¢çˆ¬å–
- `bili_detail` - æŒ‡å®šè§†é¢‘è¯¦æƒ…
- `bili_creator` - åˆ›ä½œè€…ä¸»é¡µçˆ¬å–

### å¾®åš (wb)
- `wb_search` - å…³é”®è¯æœç´¢çˆ¬å–
- `wb_detail` - æŒ‡å®šå¾®åšè¯¦æƒ…
- `wb_creator` - åˆ›ä½œè€…ä¸»é¡µçˆ¬å–

### è´´å§ (tieba)
- `tieba_search` - å…³é”®è¯æœç´¢çˆ¬å–
- `tieba_detail` - æŒ‡å®šå¸–å­è¯¦æƒ…

### çŸ¥ä¹ (zhihu)
- `zhihu_search` - å…³é”®è¯æœç´¢çˆ¬å–
- `zhihu_detail` - æŒ‡å®šå†…å®¹è¯¦æƒ…

## ğŸ“ MCP Promptsï¼ˆä½¿ç”¨æŒ‡å—ï¼‰

é¡¹ç›®å†…ç½®å¤šä¸ª Prompt æ¨¡æ¿ï¼Œå¸®åŠ© AI æ›´å¥½åœ°ä½¿ç”¨çˆ¬è™«å·¥å…·ï¼š

- **crawler_basic** - åŸºç¡€çˆ¬è™«ä½¿ç”¨æŒ‡å—
- **xiaohongshu_guide** - å°çº¢ä¹¦çˆ¬è™«è¯¦ç»†è¯´æ˜
- **data_analysis** - çˆ¬å–æ•°æ®åˆ†ææŒ‡å—
- **troubleshooting** - æ•…éšœæ’æŸ¥æŒ‡å—
- **batch_crawler** - æ‰¹é‡çˆ¬å–æœ€ä½³å®è·µ

### ç¤ºä¾‹ï¼šè®© AI çˆ¬å–å°çº¢ä¹¦æ•°æ®

```plaintext
è¯·ä½¿ç”¨ xhs_search å·¥å…·çˆ¬å–"AIç»˜ç”»"ç›¸å…³çš„å°çº¢ä¹¦ç¬”è®°ï¼Œ
çˆ¬å– 20 æ¡ï¼Œå¹¶æå–æ ‡é¢˜ã€ç‚¹èµæ•°ã€è¯„è®ºæ•°ã€‚
```

AI ä¼šè‡ªåŠ¨è°ƒç”¨ `xhs_search` å·¥å…·å¹¶è¿”å›ç»“æ„åŒ–æ•°æ®ã€‚

## ğŸ›ï¸ ç®¡ç†ç«¯åŠŸèƒ½

ç‹¬ç«‹çš„ Web ç®¡ç†ç•Œé¢ï¼ˆç«¯å£ 9091ï¼‰ï¼Œè§£å†³äººå·¥äº¤äº’åœºæ™¯ï¼š

### æ ¸å¿ƒåŠŸèƒ½

- **ç™»å½•ç®¡ç†**: å¤„ç†å¹³å°ç™»å½•ã€éªŒè¯ç è¯†åˆ«
- **ä»»åŠ¡ç›‘æ§**: æŸ¥çœ‹çˆ¬è™«ä»»åŠ¡æ‰§è¡ŒçŠ¶æ€
- **æ•°æ®ç®¡ç†**: æµè§ˆã€å¯¼å‡ºçˆ¬å–çš„æ•°æ®
- **é…ç½®ç®¡ç†**: åŠ¨æ€è°ƒæ•´çˆ¬è™«å‚æ•°

### è®¿é—®ç®¡ç†ç«¯

```bash
http://localhost:9091
```

## ğŸ“Š æ•°æ®å­˜å‚¨

çˆ¬å–çš„æ•°æ®é»˜è®¤ä¿å­˜åœ¨ `data/` ç›®å½•ï¼š

```
data/
â”œâ”€â”€ xhs/                 # å°çº¢ä¹¦æ•°æ®
â”‚   â”œâ”€â”€ notes_*.json     # ç¬”è®°æ•°æ®
â”‚   â””â”€â”€ comments_*.json  # è¯„è®ºæ•°æ®
â”œâ”€â”€ dy/                  # æŠ–éŸ³æ•°æ®
â”œâ”€â”€ bili/                # Bç«™æ•°æ®
â””â”€â”€ ...                  # å…¶ä»–å¹³å°
```

æ”¯æŒå¤šç§å­˜å‚¨æ–¹å¼ï¼š

- **JSON** - æ–‡ä»¶å­˜å‚¨ï¼ˆé»˜è®¤ï¼‰
- **CSV** - Excel å…¼å®¹æ ¼å¼
- **SQLite** - æœ¬åœ°æ•°æ®åº“
- **PostgreSQL** - ç”Ÿäº§ç¯å¢ƒæ¨è

## ğŸ³ Docker éƒ¨ç½²

### å®Œæ•´éƒ¨ç½²ï¼ˆæ¨èï¼‰

```bash
cd deploy && docker compose up -d
```

åŒ…å«æœåŠ¡ï¼š
- PostgreSQL - æ•°æ®æŒä¹…åŒ–
- Redis - ç¼“å­˜å’Œä¼šè¯
- MCP Service - ä¸»æœåŠ¡
- Nginx - åå‘ä»£ç†ï¼ˆå¯é€‰ï¼‰

### æŸ¥çœ‹æ—¥å¿—

```bash
# æ‰€æœ‰æœåŠ¡æ—¥å¿—
cd deploy && docker compose logs -f

# ç‰¹å®šæœåŠ¡æ—¥å¿—
cd deploy && docker compose logs -f mcp-service
```

### åœæ­¢æœåŠ¡

```bash
cd deploy && docker compose down
```

## ğŸ” å¸¸ç”¨å‘½ä»¤

### å¼€å‘è°ƒè¯•

```bash
# æ ¼å¼åŒ–ä»£ç 
poetry run black app/ && poetry run isort app/

# ç±»å‹æ£€æŸ¥
poetry run mypy app/

# è¿è¡Œæµ‹è¯•
poetry run pytest tests/ -v

# æ›´æ–°ä¾èµ–
poetry update
```

### Docker ç®¡ç†

```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
cd deploy && docker compose ps

# é‡å¯ MCP æœåŠ¡
cd deploy && docker compose restart mcp-service

# è¿›å…¥å®¹å™¨
cd deploy && docker compose exec mcp-service bash

# æŸ¥çœ‹èµ„æºä½¿ç”¨
docker stats mcp-tools-service

# æ¸…ç†å¹¶é‡å»º
cd deploy && docker compose down -v
cd deploy && docker compose up -d --build
```

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### 1. AI é©±åŠ¨çš„æ•°æ®é‡‡é›†

```plaintext
ç”¨æˆ·: å¸®æˆ‘æ”¶é›†æœ€è¿‘ä¸€å‘¨"æ–°èƒ½æºæ±½è½¦"åœ¨å°çº¢ä¹¦çš„çƒ­é—¨è®¨è®º
AI: è°ƒç”¨ xhs_search å·¥å…· â†’ è¿”å›ç»“æ„åŒ–æ•°æ® â†’ ç”Ÿæˆåˆ†ææŠ¥å‘Š
```

### 2. ç«å“åˆ†æ

```plaintext
ç”¨æˆ·: åˆ†æ"æä½³ç¦"å’Œ"è–‡å¨…"åœ¨æŠ–éŸ³çš„ç²‰ä¸äº’åŠ¨æƒ…å†µ
AI: è°ƒç”¨ dy_creator å·¥å…· â†’ å¯¹æ¯”æ•°æ® â†’ ç”Ÿæˆå¯è§†åŒ–æŠ¥å‘Š
```

### 3. èˆ†æƒ…ç›‘æ§

```plaintext
ç”¨æˆ·: ç›‘æ§"æŸå“ç‰Œ"åœ¨å„å¹³å°çš„è¯„è®ºæƒ…ç»ª
AI: æ‰¹é‡è°ƒç”¨å¤šä¸ªå¹³å°å·¥å…· â†’ æƒ…æ„Ÿåˆ†æ â†’ å®æ—¶é¢„è­¦
```

## âš™ï¸ é«˜çº§é…ç½®

### é€‰æ‹©æ€§å¯ç”¨å¹³å°

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼š

```bash
# ä»…å¯ç”¨å°çº¢ä¹¦å’ŒæŠ–éŸ³
ENABLED_PLATFORMS=xhs,dy

# å¯ç”¨æ‰€æœ‰å¹³å°
ENABLED_PLATFORMS=all
```

### MediaCrawler å‚æ•°

```bash
# æ— å¤´æ¨¡å¼ï¼ˆç”Ÿäº§ç¯å¢ƒæ¨èï¼‰
MEDIA_CRAWLER_HEADLESS=true

# ç™»å½•æ–¹å¼
MEDIA_CRAWLER_LOGIN_TYPE=qrcode  # qrcode, phone, cookie

# æ•°æ®å­˜å‚¨
MEDIA_CRAWLER_SAVE_DATA_OPTION=json  # json, csv, db, sqlite
```

## ğŸ›¡ï¸ æ³¨æ„äº‹é¡¹

1. **åˆè§„ä½¿ç”¨**: ä»…ç”¨äºå­¦ä¹ ç ”ç©¶ï¼Œè¯·éµå®ˆå¹³å°çš„ robots.txt å’ŒæœåŠ¡æ¡æ¬¾
2. **é¢‘ç‡æ§åˆ¶**: å»ºè®®è®¾ç½®åˆç†çš„çˆ¬å–é—´éš”ï¼Œé¿å…å¯¹å¹³å°é€ æˆè´Ÿæ‹…
3. **æ•°æ®éšç§**: å¦¥å–„ä¿ç®¡çˆ¬å–çš„æ•°æ®ï¼Œä¸å¾—ç”¨äºå•†ä¸šç›®çš„
4. **Cookie å®‰å…¨**: æµè§ˆå™¨ç™»å½•çŠ¶æ€å­˜å‚¨åœ¨ `browser_data/` ç›®å½•ï¼Œæ³¨æ„æƒé™æ§åˆ¶

## ğŸ”§ æ•…éšœæ’æŸ¥

### ç™»å½•å¤±è´¥

```bash
# æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
rm -rf browser_data/

# ä½¿ç”¨æ‰«ç ç™»å½•ï¼ˆæ¨èï¼‰
MEDIA_CRAWLER_LOGIN_TYPE=qrcode
```

### Docker å®¹å™¨æ— æ³•å¯åŠ¨

```bash
# æŸ¥çœ‹æ—¥å¿—
cd deploy && docker compose logs mcp-service

# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tuln | grep 9090

# é‡å»ºå®¹å™¨
cd deploy && docker compose down -v
cd deploy && docker compose up -d --build
```

### çˆ¬å–æ•°æ®ä¸ºç©º

1. æ£€æŸ¥å¹³å°ç™»å½•çŠ¶æ€
2. éªŒè¯ URL æ ¼å¼æ˜¯å¦æ­£ç¡®
3. æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ `logs/mcp-toolse.log`

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

### å¼€å‘æµç¨‹

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

### æ·»åŠ æ–°å¹³å°æ”¯æŒ

å‚è€ƒ `app/api/endpoints/platforms/` ä¸‹çš„ç°æœ‰å®ç°ï¼Œåˆ›å»ºæ–°çš„ Endpoint ç±»å¹¶æ³¨å†Œã€‚

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ“ æ”¯æŒä¸åé¦ˆ

- ğŸ“§ é‚®ç®±: yancyyu.ok@gmail.com
- ğŸ› é—®é¢˜åé¦ˆ: [GitHub Issues](https://github.com/your-repo/issues)
- ğŸ’¬ è®¨è®º: [GitHub Discussions](https://github.com/your-repo/discussions)

## ğŸŒŸ Star History

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª Star â­ï¸ æ”¯æŒä¸€ä¸‹ï¼

---

**MCP Tools** - è®© AI æ‹¥æœ‰ç¤¾äº¤åª’ä½“æ•°æ®é‡‡é›†èƒ½åŠ› ğŸš€