{% extends "layout.html" %}

{% block title %}ç™»å½•ç®¡ç† - MCP Tools{% endblock %}

{% block content %}
<div class="card">
    <div class="card-header">
        <h2>ğŸ” å¹³å°ç™»å½•ç®¡ç†</h2>
    </div>
    <div class="card-body">
        <!-- ç™»å½•è¡¨å• -->
        <form id="login-form" class="mb-4">
            <div class="row">
                <div class="col">
                    <div class="form-group">
                        <label for="platform" class="form-label">é€‰æ‹©å¹³å°</label>
                        <select name="platform" id="platform" class="form-control" required>
                            <option value="">è¯·é€‰æ‹©å¹³å°</option>
                        </select>
                        <small class="form-text text-muted" id="platform-tip">æ­£åœ¨åŠ è½½å¯ç”¨å¹³å°...</small>
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <label for="login_type" class="form-label">ç™»å½•æ–¹å¼</label>
                        <select name="login_type" id="login_type" class="form-control" onchange="toggleLoginFields()">
                            <option value="qrcode">äºŒç»´ç æ‰«ç </option>
                            <option value="cookie">Cookieç™»å½•</option>
                            <option value="phone">æ‰‹æœºå·ç™»å½•</option>
                        </select>
                    </div>
                </div>
            </div>

            <div id="phone-field" class="form-group d-none">
                <label for="phone" class="form-label">æ‰‹æœºå·</label>
                <input type="tel" name="phone" id="phone" class="form-control" placeholder="è¯·è¾“å…¥æ‰‹æœºå·">
            </div>

            <div id="cookie-field" class="form-group d-none">
                <label for="cookie" class="form-label">Cookie</label>
                <textarea name="cookie" id="cookie" class="form-control" rows="4" placeholder="ä»æµè§ˆå™¨å¼€å‘è€…å·¥å…·è·å–Cookieï¼Œç²˜è´´åˆ°æ­¤å¤„..."></textarea>
            </div>

            <div class="form-group">
                <button type="submit" id="login-submit-btn" class="btn btn-primary">å¼€å§‹ç™»å½•</button>
                <button type="button" class="btn btn-secondary" onclick="refreshLoginStatus()">åˆ·æ–°çŠ¶æ€</button>
                <button type="button" class="btn btn-outline-secondary d-none" id="refresh-qr-btn">åˆ·æ–°äºŒç»´ç </button>
            </div>
        </form>

        <!-- ç™»å½•çŠ¶æ€æ˜¾ç¤º -->
        <div id="login-status" class="mb-3 text-center status"></div>

        <!-- äºŒç»´ç å®¹å™¨ -->
        <div id="qr-code-container" class="d-none">
            <div id="qr-countdown" class="text-center text-muted small mb-2"></div>
        </div>
    </div>
</div>

<!-- å¹³å°ç™»å½•çŠ¶æ€ -->
<div class="card">
    <div class="card-header">
        <h2>ğŸ“± å¹³å°ç™»å½•çŠ¶æ€</h2>
    </div>
    <div class="card-body">
        <div class="platform-list" id="platform-sessions">
            <div class="text-center">
                <p>æ­£åœ¨åŠ è½½å¹³å°çŠ¶æ€...</p>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}{% endblock %}
